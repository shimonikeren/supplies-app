<div class="container">
    <div class="row">
        <div class="col-sm-4"></div>
        <div class="col-sm-4">
            <h1>ORDER FORM</h1>
            <hr>
        </div>
        <div class="col-sm-4"></div>
    </div>
</div> 

<div class="container">
    <div class="row">
        <div class="col-sm-4">
            <h2>Supplies to buy</h2> 
            <h6>*Click the &#x2714 Button once Purchased</h6>
            <ul>
                {{#each supplies}}
                    {{#unless purchased}}
                <li>
                    <button class="purchased-button" data-id={{this.id}} type="submit">&#x2714</button>
                    {{this.supply}}
                </li>
                    {{/unless}}
                {{/each}}
            </ul>
        </div>
        <div class="col-sm-4">
            <h2>Supplies Input Form</h2> 
                <div class="form-container">
                    <div class="row">
                        <div class="col-md-8 center-element">
                            <form class="create-form">
                                <div class="form-group">
                                    <label>Enter item</label>
                                    <input class="input-lg form-control" id="enter" type="text" name="supply-enter">
                                </div>
                                <button id="submit-button" type="submit">Submit</button>
                            </form>
                        </div>
                    </div>
                </div>
        </div>
        <div class="col-sm-4">
            <h2>Supplies Already Bought</h2> 
                <h6>*Click &#10008 button to Delete from Form </h6>
                {{!-- <h6>*Click R button to Re-Add to Order Form </h6> --}}
                <ul>
                {{#each supplies}}
                    {{#if purchased}}
                    <li>
                        <button data-id="{{this.id}}" class="delbutton" type="submit">&#10008</button>
                        <button data-id="{{this.id}}" class="reOrder" type="submit">R</button>
                        {{this.supply}}
                    </li>
                    {{/if}}
                {{/each}}
                </ul>
            
            
            </div>
    </div><!--end row-->
</div> <!--end container-->

<!--start script-->

<script type="text/javascript">

$( document ).ready(function() {
    $(".create-form").on("submit", function(event) {
    event.preventDefault();
    var newSupply = {
      supply: $("#enter").val().trim()
    };
    $.ajax("/api/supplies", {
      type: "POST",
      data: newSupply
    }).then(
      function() {
        // Rather than redirect to new page, reload the page to get the updated info
        location.reload();
      }
    );
  });

  $(".purchased-button").on("click", function(event) {
    event.preventDefault();
    var itemId = $(this).data("id");
    // Send the PUT request.
    $.ajax("/api/supplies/" + itemId , {
      type: "PUT"
    }).then(
      function(purchaseState) {
        console.log("worked");
        location.reload();
      }
    );
  });

$(".delbutton").on("click", function(event) {
    event.preventDefault();
    var itemId = $(this).data("id");
    // Send the DELETE request.
    $.ajax("/api/supplies/" + itemId, {
      type: "DELETE"
    }).then(
      function(something) {
        console.log("WORKED");
        // Reload the page to get the updated list
        location.reload();
      }
    );
  });

$(".reOrder").on("click", function(event) {
    event.preventDefault();
    var itemId = $(this).data("id");
    // Send the DELETE request.
    $.ajax("/api/supplies/" + itemId, {
      type: "PUT"
    }).then(
      function(something) {
        console.log("WORKED");
        // Reload the page to get the updated list
        location.reload();
      }
    );
  });



}); //end doc ready 

</script>

